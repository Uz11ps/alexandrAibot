# Инструкция по настройке бота

## Что нужно запросить у заказчика перед запуском

### 1. Сервер (VDS/VPS)

**Что нужно:**
- SSH доступ к серверу
- Рекомендуемые характеристики:
  - ОС: Ubuntu 22.04 или новее
  - CPU: минимум 2 ядра
  - RAM: минимум 4 ГБ
  - Диск: минимум 40 ГБ SSD

**Альтернатива:** Можно запустить на локальном компьютере для тестирования, но для продакшена нужен сервер.

---

### 2. Telegram настройки

#### Telegram Bot Token
**Как получить:**
1. Напишите боту [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям: укажите имя и username бота
4. Скопируйте полученный токен (формат: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

**Что запросить:** Токен бота от BotFather

#### Telegram Admin ID
**Как получить:**
1. Напишите боту [@userinfobot](https://t.me/userinfobot)
2. Бот пришлет ваш ID (формат: `123456789`)

**Что запросить:** Telegram ID руководителя (администратора бота)

#### Telegram Channel ID
**Как получить:**
1. Создайте канал в Telegram или используйте существующий
2. Добавьте бота как администратора канала
3. Получите ID канала одним из способов:
   - Если канал публичный: используйте username (например: `@channel_name`)
   - Если канал приватный: перешлите любое сообщение из канала боту [@userinfobot](https://t.me/userinfobot) - он покажет ID

**Что запросить:** ID или username канала для публикаций

---

### 3. VK настройки

#### VK Group ID
**Как получить:**
1. Откройте вашу группу ВКонтакте
2. В адресной строке будет ID (например: `vk.com/club123456789`)
3. ID группы - это число после `club` (в примере: `123456789`)
4. Для использования в боте нужно указать отрицательное число: `-123456789`

**Что запросить:** ID группы ВКонтакте (отрицательное число)

#### VK Access Token
**Как получить:**
1. Перейдите в настройки вашего сообщества ВКонтакте
2. Раздел "Работа с API" → "Создать ключ"
3. Выберите необходимые права доступа:
   - ✅ `wall` - доступ к стене сообщества
   - ✅ `photos` - доступ к фотографиям
   - ✅ `groups` - доступ к информации о сообществах
4. Скопируйте созданный токен

**Что запросить:** Токен доступа к API VK с правами `wall`, `photos`, `groups`

---

### 4. OpenAI настройки

#### OpenAI API Key
**Как получить:**
1. Зарегистрируйтесь на [platform.openai.com](https://platform.openai.com)
2. Перейдите в раздел "API Keys"
3. Создайте новый ключ
4. Скопируйте ключ (формат: `sk-...`)

**Важно:** 
- Убедитесь, что на счету есть средства для использования API
- Рекомендуется использовать модель `gpt-5` для лучшего качества анализа фото и генерации текста

**Что запросить:** OpenAI API Key

---

### 5. Список сотрудников

**Что запросить:** Список сотрудников в формате:
```
Имя Фамилия | Роль | Telegram ID
```

Пример:
```
Иван Петров | Инженер по объекту A | 123456789
Мария Сидорова | Юрист | 987654321
```

**Как получить Telegram ID сотрудников:**
- Попросите каждого сотрудника написать боту [@userinfobot](https://t.me/userinfobot)
- Бот пришлет их ID

---

### 6. Файловое хранилище

**Варианты:**
1. **Локальная папка на сервере** (рекомендуется для старта)
   - Бот создаст папки автоматически при первом запуске
   - Нужно будет загрузить файлы в соответствующие папки

2. **Google Drive** (для будущего расширения)
   - Понадобятся API ключи Google Drive

3. **Яндекс.Диск** (для будущего расширения)
   - Понадобятся API ключи Яндекс.Диска

**Что запросить:** 
- Где будут храниться файлы? (рекомендуем начать с локальной папки)
- Если облачное хранилище - предоставить доступы

---

## Структура папок для файлов

После запуска бот создаст следующие папки:

- `storage/photos/` - фотографии объектов (подпапки по объектам приветствуются)
- `storage/drafts/` - черновики сотрудников
- `storage/laws/` - документы с законами и нормативными актами
- `storage/memes/` - мемы и визуальный контент
- `storage/services/` - материалы об услугах компании
- `storage/archive/` - архив опубликованных постов (создается автоматически)

---

## Чек-лист перед запуском

- [ ] Получен Telegram Bot Token
- [ ] Получен Telegram Admin ID
- [ ] Получен Telegram Channel ID
- [ ] Получен VK Group ID
- [ ] Получен VK Access Token
- [ ] Получен OpenAI API Key
- [ ] Подготовлен список сотрудников с Telegram ID
- [ ] Определено место хранения файлов
- [ ] Загружены фотографии в `storage/photos/`
- [ ] Загружены документы в `storage/laws/` (если есть)
- [ ] Заполнен файл `.env` со всеми настройками

---

## После получения всех данных

1. Заполните файл `.env` всеми полученными данными
2. Запустите скрипт инициализации: `python scripts/init_folders.py`
3. Загрузите файлы в соответствующие папки
4. Запустите бота: `python main.py`
5. Проверьте работу командой `/start` в Telegram

---

## Поддержка

При возникновении проблем проверьте:
- Все токены и ключи указаны правильно в `.env`
- Бот добавлен как администратор в Telegram канал
- У VK токена есть необходимые права доступа
- На счету OpenAI есть средства для использования API
- Структура папок создана корректно

